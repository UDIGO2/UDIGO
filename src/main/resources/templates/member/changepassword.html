<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비밀번호 변경</title>
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/changepassword.css}">
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div id="change-password-page">

    <main class="main-content">
        <h2>비밀번호 변경</h2>

        <form th:action="@{/member/changepassword}" method="post">
            <label>현재 비밀번호:</label>
            <input type="password" name="currentPassword" required>
            <br>

            <label>새 비밀번호:</label>
            <input type="password" name="newPassword" required>
            <br>

            <label>새 비밀번호 확인:</label>
            <input type="password" name="confirmPassword" required>
            <br>

            <button type="submit" class="password-change-btn">비밀번호 변경</button>
        </form>

        <p th:if="${error}" style="color: red;" th:text="${error}"></p>
        <p th:if="${success}" style="color: green;" th:text="${success}"></p>

    </main>

    <script>
        window.onload = function() {
            let successMessage = "[[${successMessage}]]"; // Thymeleaf에서 successMessage 가져오기
            if (successMessage && successMessage !== "null") {
                alert(successMessage);
                window.location.href = "/auth/login"; //  확인 후 로그인 페이지로 이동
            }
        };
    </script>

</div>
<!--  푸터 추가 -->
<div th:replace="~{fragments/footer :: footer}"></div>

</body>
</html>
